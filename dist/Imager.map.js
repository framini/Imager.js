{"version":3,"file":"./Imager.min.js","sources":["./Imager.js"],"names":["window","document","applyEach","collection","callbackEach","i","length","new_collection","returnDirectValue","value","Imager","elements","opts","self","this","doc","undefined","selector","imagesOffScreen","viewportHeight","documentElement","clientHeight","className","gif","createElement","src","alt","scrollDelay","onResize","hasOwnProperty","lazyload","scrolled","availablePixelRatios","availableWidths","defaultWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","deltaSquare","squareSelector","adaptSelector","removeAttribute","createWidthsMap","getKeys","sort","a","b","divs","querySelectorAll","changeDivsToEmptyImages","nextTick","init","addEvent","getNaturalWidth","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","callback","setTimeout","Object","prototype","call","image","naturalWidth","source","img","width","addEventListener","el","eventName","fn","attachEvent","keys","object","key","push","scrollCheck","clearInterval","interval","slice","initialized","checkImagesNeedReplacing","registerResizeEvent","registerScrollEvent","createGif","element","match","RegExp","elementClassName","getAttribute","elementWidth","cloneNode","setAttribute","parentNode","replaceChild","isThisElementOnScreen","offset","getPageOffset","elementOffsetTop","offsetParent","offsetTop","images","isResizing","replaceImagesBasedOnScreenDimensions","computedWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","buildUrlStructure","getClosestValue","clientWidth","devicePixelRatio","getPixelRatio","selectedWidth","replace","transforms","pixelRatio","isImageContainerSquare","context","widths","interpolator","map","baseValue","candidates","parseFloat","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","module","exports","define","amd"],"mappings":"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"}